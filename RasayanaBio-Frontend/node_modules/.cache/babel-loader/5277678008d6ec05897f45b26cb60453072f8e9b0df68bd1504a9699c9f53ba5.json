{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\YSXP\\\\Desktop\\\\RasanayaBio\\\\RasayanaBio-Frontend\\\\src\\\\context\\\\WishlistContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// ============================================\n// src/context/WishlistContext.js\n// ============================================\nimport React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WishlistContext = /*#__PURE__*/createContext();\nexport const useWishlist = () => {\n  _s();\n  const context = useContext(WishlistContext);\n  if (!context) {\n    throw new Error('useWishlist must be used within a WishlistProvider');\n  }\n  return context;\n};\n_s(useWishlist, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const WishlistProvider = ({\n  children\n}) => {\n  _s2();\n  const [wishlistItems, setWishlistItems] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Load wishlist from localStorage on mount\n  useEffect(() => {\n    const savedWishlist = localStorage.getItem('wishlist');\n    if (savedWishlist) {\n      try {\n        setWishlistItems(JSON.parse(savedWishlist));\n      } catch (error) {\n        console.error('Error parsing wishlist from localStorage:', error);\n        localStorage.removeItem('wishlist');\n      }\n    }\n  }, []);\n\n  // Save wishlist to localStorage whenever it changes\n  useEffect(() => {\n    localStorage.setItem('wishlist', JSON.stringify(wishlistItems));\n  }, [wishlistItems]);\n  const addToWishlist = useCallback(async product => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      // Check if product is already in wishlist\n      const existingItem = wishlistItems.find(item => item.id === product.id);\n      if (existingItem) {\n        return; // Already in wishlist\n      }\n\n      // Add to wishlist\n      const newItem = {\n        id: product.id,\n        name: product.name,\n        price: product.price,\n        sale_price: product.sale_price,\n        image_url: product.image_url,\n        category: product.category,\n        addedAt: new Date().toISOString()\n      };\n      setWishlistItems(prev => [...prev, newItem]);\n\n      // If user is authenticated, sync with backend\n      const token = localStorage.getItem('token');\n      if (token) {\n        try {\n          await axios.post('http://localhost:4000/api/wishlist/add', {\n            product_id: product.id\n          }, {\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }\n          });\n        } catch (error) {\n          console.error('Error syncing wishlist with backend:', error);\n          // Continue with local storage even if backend fails\n        }\n      }\n    } catch (error) {\n      console.error('Error adding to wishlist:', error);\n      setError('Failed to add to wishlist');\n    } finally {\n      setLoading(false);\n    }\n  }, [wishlistItems]);\n  const removeFromWishlist = useCallback(async productId => {\n    try {\n      setLoading(true);\n      setError(null);\n      setWishlistItems(prev => prev.filter(item => item.id !== productId));\n\n      // If user is authenticated, sync with backend\n      const token = localStorage.getItem('token');\n      if (token) {\n        try {\n          await axios.delete(`http://localhost:4000/api/wishlist/remove/${productId}`, {\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }\n          });\n        } catch (error) {\n          console.error('Error syncing wishlist removal with backend:', error);\n          // Continue with local storage even if backend fails\n        }\n      }\n    } catch (error) {\n      console.error('Error removing from wishlist:', error);\n      setError('Failed to remove from wishlist');\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n  const toggleWishlist = useCallback(async product => {\n    const isInWishlist = wishlistItems.some(item => item.id === product.id);\n    if (isInWishlist) {\n      await removeFromWishlist(product.id);\n    } else {\n      await addToWishlist(product);\n    }\n  }, [wishlistItems, addToWishlist, removeFromWishlist]);\n  const isInWishlist = useCallback(productId => {\n    return wishlistItems.some(item => item.id === productId);\n  }, [wishlistItems]);\n  const clearWishlist = useCallback(() => {\n    setWishlistItems([]);\n    localStorage.removeItem('wishlist');\n  }, []);\n  const syncWishlistWithBackend = useCallback(async () => {\n    const token = localStorage.getItem('token');\n    if (!token) return;\n    try {\n      setLoading(true);\n      const response = await axios.get('http://localhost:4000/api/wishlist', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (response.data.success) {\n        setWishlistItems(response.data.wishlist || []);\n      }\n    } catch (error) {\n      console.error('Error syncing wishlist with backend:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n  const value = {\n    wishlistItems,\n    wishlistCount: wishlistItems.length,\n    loading,\n    error,\n    addToWishlist,\n    removeFromWishlist,\n    toggleWishlist,\n    isInWishlist,\n    clearWishlist,\n    syncWishlistWithBackend\n  };\n  return /*#__PURE__*/_jsxDEV(WishlistContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 174,\n    columnNumber: 5\n  }, this);\n};\n_s2(WishlistProvider, \"iJr36mNVeebWnSSWoTgqosuidZ4=\");\n_c = WishlistProvider;\nexport default WishlistContext;\nvar _c;\n$RefreshReg$(_c, \"WishlistProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","useCallback","axios","jsxDEV","_jsxDEV","WishlistContext","useWishlist","_s","context","Error","WishlistProvider","children","_s2","wishlistItems","setWishlistItems","loading","setLoading","error","setError","savedWishlist","localStorage","getItem","JSON","parse","console","removeItem","setItem","stringify","addToWishlist","product","existingItem","find","item","id","newItem","name","price","sale_price","image_url","category","addedAt","Date","toISOString","prev","token","post","product_id","headers","removeFromWishlist","productId","filter","delete","toggleWishlist","isInWishlist","some","clearWishlist","syncWishlistWithBackend","response","get","data","success","wishlist","value","wishlistCount","length","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/YSXP/Desktop/RasanayaBio/RasayanaBio-Frontend/src/context/WishlistContext.js"],"sourcesContent":["// ============================================\r\n// src/context/WishlistContext.js\r\n// ============================================\r\nimport React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst WishlistContext = createContext();\r\n\r\nexport const useWishlist = () => {\r\n  const context = useContext(WishlistContext);\r\n  if (!context) {\r\n    throw new Error('useWishlist must be used within a WishlistProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const WishlistProvider = ({ children }) => {\r\n  const [wishlistItems, setWishlistItems] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Load wishlist from localStorage on mount\r\n  useEffect(() => {\r\n    const savedWishlist = localStorage.getItem('wishlist');\r\n    if (savedWishlist) {\r\n      try {\r\n        setWishlistItems(JSON.parse(savedWishlist));\r\n      } catch (error) {\r\n        console.error('Error parsing wishlist from localStorage:', error);\r\n        localStorage.removeItem('wishlist');\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  // Save wishlist to localStorage whenever it changes\r\n  useEffect(() => {\r\n    localStorage.setItem('wishlist', JSON.stringify(wishlistItems));\r\n  }, [wishlistItems]);\r\n\r\n  const addToWishlist = useCallback(async (product) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      // Check if product is already in wishlist\r\n      const existingItem = wishlistItems.find(item => item.id === product.id);\r\n      if (existingItem) {\r\n        return; // Already in wishlist\r\n      }\r\n\r\n      // Add to wishlist\r\n      const newItem = {\r\n        id: product.id,\r\n        name: product.name,\r\n        price: product.price,\r\n        sale_price: product.sale_price,\r\n        image_url: product.image_url,\r\n        category: product.category,\r\n        addedAt: new Date().toISOString()\r\n      };\r\n\r\n      setWishlistItems(prev => [...prev, newItem]);\r\n\r\n      // If user is authenticated, sync with backend\r\n      const token = localStorage.getItem('token');\r\n      if (token) {\r\n        try {\r\n          await axios.post('http://localhost:4000/api/wishlist/add', {\r\n            product_id: product.id\r\n          }, {\r\n            headers: {\r\n              'Authorization': `Bearer ${token}`\r\n            }\r\n          });\r\n        } catch (error) {\r\n          console.error('Error syncing wishlist with backend:', error);\r\n          // Continue with local storage even if backend fails\r\n        }\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Error adding to wishlist:', error);\r\n      setError('Failed to add to wishlist');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [wishlistItems]);\r\n\r\n  const removeFromWishlist = useCallback(async (productId) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      setWishlistItems(prev => prev.filter(item => item.id !== productId));\r\n\r\n      // If user is authenticated, sync with backend\r\n      const token = localStorage.getItem('token');\r\n      if (token) {\r\n        try {\r\n          await axios.delete(`http://localhost:4000/api/wishlist/remove/${productId}`, {\r\n            headers: {\r\n              'Authorization': `Bearer ${token}`\r\n            }\r\n          });\r\n        } catch (error) {\r\n          console.error('Error syncing wishlist removal with backend:', error);\r\n          // Continue with local storage even if backend fails\r\n        }\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Error removing from wishlist:', error);\r\n      setError('Failed to remove from wishlist');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const toggleWishlist = useCallback(async (product) => {\r\n    const isInWishlist = wishlistItems.some(item => item.id === product.id);\r\n    \r\n    if (isInWishlist) {\r\n      await removeFromWishlist(product.id);\r\n    } else {\r\n      await addToWishlist(product);\r\n    }\r\n  }, [wishlistItems, addToWishlist, removeFromWishlist]);\r\n\r\n  const isInWishlist = useCallback((productId) => {\r\n    return wishlistItems.some(item => item.id === productId);\r\n  }, [wishlistItems]);\r\n\r\n  const clearWishlist = useCallback(() => {\r\n    setWishlistItems([]);\r\n    localStorage.removeItem('wishlist');\r\n  }, []);\r\n\r\n  const syncWishlistWithBackend = useCallback(async () => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      const response = await axios.get('http://localhost:4000/api/wishlist', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n\r\n      if (response.data.success) {\r\n        setWishlistItems(response.data.wishlist || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error syncing wishlist with backend:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const value = {\r\n    wishlistItems,\r\n    wishlistCount: wishlistItems.length,\r\n    loading,\r\n    error,\r\n    addToWishlist,\r\n    removeFromWishlist,\r\n    toggleWishlist,\r\n    isInWishlist,\r\n    clearWishlist,\r\n    syncWishlistWithBackend\r\n  };\r\n\r\n  return (\r\n    <WishlistContext.Provider value={value}>\r\n      {children}\r\n    </WishlistContext.Provider>\r\n  );\r\n};\r\n\r\nexport default WishlistContext;\r\n"],"mappings":";;;AAAA;AACA;AACA;AACA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AAC1F,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,MAAMC,eAAe,gBAAGR,aAAa,CAAC,CAAC;AAEvC,OAAO,MAAMS,WAAW,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC/B,MAAMC,OAAO,GAAGV,UAAU,CAACO,eAAe,CAAC;EAC3C,IAAI,CAACG,OAAO,EAAE;IACZ,MAAM,IAAIC,KAAK,CAAC,oDAAoD,CAAC;EACvE;EACA,OAAOD,OAAO;AAChB,CAAC;AAACD,EAAA,CANWD,WAAW;AAQxB,OAAO,MAAMI,gBAAgB,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,GAAA;EAChD,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACgB,OAAO,EAAEC,UAAU,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACkB,KAAK,EAAEC,QAAQ,CAAC,GAAGnB,QAAQ,CAAC,IAAI,CAAC;;EAExC;EACAC,SAAS,CAAC,MAAM;IACd,MAAMmB,aAAa,GAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;IACtD,IAAIF,aAAa,EAAE;MACjB,IAAI;QACFL,gBAAgB,CAACQ,IAAI,CAACC,KAAK,CAACJ,aAAa,CAAC,CAAC;MAC7C,CAAC,CAAC,OAAOF,KAAK,EAAE;QACdO,OAAO,CAACP,KAAK,CAAC,2CAA2C,EAAEA,KAAK,CAAC;QACjEG,YAAY,CAACK,UAAU,CAAC,UAAU,CAAC;MACrC;IACF;EACF,CAAC,EAAE,EAAE,CAAC;;EAEN;EACAzB,SAAS,CAAC,MAAM;IACdoB,YAAY,CAACM,OAAO,CAAC,UAAU,EAAEJ,IAAI,CAACK,SAAS,CAACd,aAAa,CAAC,CAAC;EACjE,CAAC,EAAE,CAACA,aAAa,CAAC,CAAC;EAEnB,MAAMe,aAAa,GAAG3B,WAAW,CAAC,MAAO4B,OAAO,IAAK;IACnD,IAAI;MACFb,UAAU,CAAC,IAAI,CAAC;MAChBE,QAAQ,CAAC,IAAI,CAAC;;MAEd;MACA,MAAMY,YAAY,GAAGjB,aAAa,CAACkB,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACC,EAAE,KAAKJ,OAAO,CAACI,EAAE,CAAC;MACvE,IAAIH,YAAY,EAAE;QAChB,OAAO,CAAC;MACV;;MAEA;MACA,MAAMI,OAAO,GAAG;QACdD,EAAE,EAAEJ,OAAO,CAACI,EAAE;QACdE,IAAI,EAAEN,OAAO,CAACM,IAAI;QAClBC,KAAK,EAAEP,OAAO,CAACO,KAAK;QACpBC,UAAU,EAAER,OAAO,CAACQ,UAAU;QAC9BC,SAAS,EAAET,OAAO,CAACS,SAAS;QAC5BC,QAAQ,EAAEV,OAAO,CAACU,QAAQ;QAC1BC,OAAO,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;MAClC,CAAC;MAED5B,gBAAgB,CAAC6B,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAET,OAAO,CAAC,CAAC;;MAE5C;MACA,MAAMU,KAAK,GAAGxB,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,IAAIuB,KAAK,EAAE;QACT,IAAI;UACF,MAAM1C,KAAK,CAAC2C,IAAI,CAAC,wCAAwC,EAAE;YACzDC,UAAU,EAAEjB,OAAO,CAACI;UACtB,CAAC,EAAE;YACDc,OAAO,EAAE;cACP,eAAe,EAAE,UAAUH,KAAK;YAClC;UACF,CAAC,CAAC;QACJ,CAAC,CAAC,OAAO3B,KAAK,EAAE;UACdO,OAAO,CAACP,KAAK,CAAC,sCAAsC,EAAEA,KAAK,CAAC;UAC5D;QACF;MACF;IAEF,CAAC,CAAC,OAAOA,KAAK,EAAE;MACdO,OAAO,CAACP,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACjDC,QAAQ,CAAC,2BAA2B,CAAC;IACvC,CAAC,SAAS;MACRF,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC,EAAE,CAACH,aAAa,CAAC,CAAC;EAEnB,MAAMmC,kBAAkB,GAAG/C,WAAW,CAAC,MAAOgD,SAAS,IAAK;IAC1D,IAAI;MACFjC,UAAU,CAAC,IAAI,CAAC;MAChBE,QAAQ,CAAC,IAAI,CAAC;MAEdJ,gBAAgB,CAAC6B,IAAI,IAAIA,IAAI,CAACO,MAAM,CAAClB,IAAI,IAAIA,IAAI,CAACC,EAAE,KAAKgB,SAAS,CAAC,CAAC;;MAEpE;MACA,MAAML,KAAK,GAAGxB,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,IAAIuB,KAAK,EAAE;QACT,IAAI;UACF,MAAM1C,KAAK,CAACiD,MAAM,CAAC,6CAA6CF,SAAS,EAAE,EAAE;YAC3EF,OAAO,EAAE;cACP,eAAe,EAAE,UAAUH,KAAK;YAClC;UACF,CAAC,CAAC;QACJ,CAAC,CAAC,OAAO3B,KAAK,EAAE;UACdO,OAAO,CAACP,KAAK,CAAC,8CAA8C,EAAEA,KAAK,CAAC;UACpE;QACF;MACF;IAEF,CAAC,CAAC,OAAOA,KAAK,EAAE;MACdO,OAAO,CAACP,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;MACrDC,QAAQ,CAAC,gCAAgC,CAAC;IAC5C,CAAC,SAAS;MACRF,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMoC,cAAc,GAAGnD,WAAW,CAAC,MAAO4B,OAAO,IAAK;IACpD,MAAMwB,YAAY,GAAGxC,aAAa,CAACyC,IAAI,CAACtB,IAAI,IAAIA,IAAI,CAACC,EAAE,KAAKJ,OAAO,CAACI,EAAE,CAAC;IAEvE,IAAIoB,YAAY,EAAE;MAChB,MAAML,kBAAkB,CAACnB,OAAO,CAACI,EAAE,CAAC;IACtC,CAAC,MAAM;MACL,MAAML,aAAa,CAACC,OAAO,CAAC;IAC9B;EACF,CAAC,EAAE,CAAChB,aAAa,EAAEe,aAAa,EAAEoB,kBAAkB,CAAC,CAAC;EAEtD,MAAMK,YAAY,GAAGpD,WAAW,CAAEgD,SAAS,IAAK;IAC9C,OAAOpC,aAAa,CAACyC,IAAI,CAACtB,IAAI,IAAIA,IAAI,CAACC,EAAE,KAAKgB,SAAS,CAAC;EAC1D,CAAC,EAAE,CAACpC,aAAa,CAAC,CAAC;EAEnB,MAAM0C,aAAa,GAAGtD,WAAW,CAAC,MAAM;IACtCa,gBAAgB,CAAC,EAAE,CAAC;IACpBM,YAAY,CAACK,UAAU,CAAC,UAAU,CAAC;EACrC,CAAC,EAAE,EAAE,CAAC;EAEN,MAAM+B,uBAAuB,GAAGvD,WAAW,CAAC,YAAY;IACtD,MAAM2C,KAAK,GAAGxB,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAI,CAACuB,KAAK,EAAE;IAEZ,IAAI;MACF5B,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMyC,QAAQ,GAAG,MAAMvD,KAAK,CAACwD,GAAG,CAAC,oCAAoC,EAAE;QACrEX,OAAO,EAAE;UACP,eAAe,EAAE,UAAUH,KAAK;QAClC;MACF,CAAC,CAAC;MAEF,IAAIa,QAAQ,CAACE,IAAI,CAACC,OAAO,EAAE;QACzB9C,gBAAgB,CAAC2C,QAAQ,CAACE,IAAI,CAACE,QAAQ,IAAI,EAAE,CAAC;MAChD;IACF,CAAC,CAAC,OAAO5C,KAAK,EAAE;MACdO,OAAO,CAACP,KAAK,CAAC,sCAAsC,EAAEA,KAAK,CAAC;IAC9D,CAAC,SAAS;MACRD,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAM8C,KAAK,GAAG;IACZjD,aAAa;IACbkD,aAAa,EAAElD,aAAa,CAACmD,MAAM;IACnCjD,OAAO;IACPE,KAAK;IACLW,aAAa;IACboB,kBAAkB;IAClBI,cAAc;IACdC,YAAY;IACZE,aAAa;IACbC;EACF,CAAC;EAED,oBACEpD,OAAA,CAACC,eAAe,CAAC4D,QAAQ;IAACH,KAAK,EAAEA,KAAM;IAAAnD,QAAA,EACpCA;EAAQ;IAAAuD,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACe,CAAC;AAE/B,CAAC;AAACzD,GAAA,CAjKWF,gBAAgB;AAAA4D,EAAA,GAAhB5D,gBAAgB;AAmK7B,eAAeL,eAAe;AAAC,IAAAiE,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}